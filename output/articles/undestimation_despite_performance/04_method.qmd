---
editor: visual
---

# Data, variables and methods

## Data and sample

The database to be used is the International Computer and Information Literacy (ICILS from now), study made by the International Association for the Evaluation of Educational Achievement (IEA) in 2018. The participants are students of eighth grade which were sampled using a random multistage stratified cluster design to be representative at the school and student/teacher level in all the countries measured. Schools can be referred to as the primary sampling units, and teachers and students as the secondary sampling units.

In ICILS measurements, Chile tends to show one of the most considerable differences between students' parents' levels of education but ranked last positions in gender ICT attitudinal and interest gaps [@claroEndEnlaces252020;@punterGenderDifferencesComputer2017]. In that sense, intuitively, this country is a good chance to start comparing gender ICT self-efficacy differences that are relatively less influenced by socio-economic variables. Also, this study is conducted by researchers from Chile, then the analysis focuses exclusively on the Chilean subset of the ICILS 2018 dataset. The raw sample comprised 3,092 students distributed across 178 schools. Both student and school levels are representative of the broader Chilean student and school population.

ICILS utilized various measurement instruments to collect data. Initially, participants underwent a Computer Literacy test consisting of tasks with multiple-choice items. Based on their responses, each individual student was assigned a score for Computer and Information Literacy (CIL from now on). Subsequently, students completed a questionnaire about their home background, values, beliefs, attitudes, and behaviors related to Computer and Information technologies. Following the questionnaire session, students responded to a Computational Thinking test (CT hereafter) featuring multiple-choice items. In Chile, this last test was not applied. In parallel, the school's teachers are also subjected to a questionnaire to assess their values, beliefs, attitudes, and behaviors related to Computer and Information technologies and their role in teaching. Also, the principals and ICT managers of the school were surveyed to obtain information on the school's social characteristics and ICT infrastructure.

## Variables

***Student level***

**General and Specialized ICT Self-efficacy**: The ICILS student data encompasses two indices of digital self-efficacy: one for general or basic applications and the other for advanced or specialized tasks. Both indices were constructed using a same battery with the question *How well can you do this tasks when using ICT?*.The items can be examined in @tbl-selfeff-items. 

```{r, results='asis', echo=FALSE}
#| tbl-cap: "ICT Self-efficacy items (Dependent variables)"
#| label: tbl-selfeff-items

selfeff_items <- data |>
  select(
    #Items general self-efficacy
    is2g27a,is2g27c,is2g27d,is2g27i,is2g27j,is2g27k,is2g27l,is2g27m,
    #Items specific self-efficacy
    is2g27b,is2g27e,is2g27g,is2g27h
    )|>
  to_label()

current_labels_first_8 <- var_label(selfeff_items)[1:8]

# Append the specified text to the current labels of the first 8 columns
new_labels_first_8 <- sapply(current_labels_first_8, function(label) {
  paste0(label, " (Suggested as General ICT Self-efficacy)")
})

# Set the new labels to the first 8 columns
var_label(selfeff_items)[1:8] <- new_labels_first_8

# Get the current labels of the last 4 columns
current_labels_last_4 <- var_label(selfeff_items)[9:12]

# Append the specified text to the current labels of the last 4 columns
new_labels_last_4 <- sapply(current_labels_last_4, function(label) {
  paste0(label, " (Suggested as Specialized ICT Self-efficacy)")
})

# Set the new labels to the last 4 columns
var_label(selfeff_items)[9:12] <- new_labels_last_4
    

selfeff_tbl<-dfSummary(selfeff_items,
               plain.ascii = FALSE,
               style = "multiline",
               tmp.img.dir = "/tmp",
               graph.magnif = 0.75,
               headings = F,  # encabezado
               varnumbers = F, # num variable
               labels.col = T, # etiquetas
               na.col = F,    # missing
               graph.col = F, # plot
               valid.col = T, # n valido
               col.widths = c(30,10,10,10))

selfeff_tbl$Variable <- NULL # delete variable column

print(selfeff_tbl)
```

[^labels_note]: Due to the extended length of the labels for items related to ICT self-efficacy, we truncated them in plots presentation. @tbl-labels illustrates both the original and the summarized labels for the items comprising both indexes and includes missing values n and missing values proportion.

The construction of both self-efficacy indices suggested by IEA were validated at international level, with a comparative approach between countries. However, before working with these variables, it is necessary to validate the measurement for the Chilean case. A confirmatory factor analysis between the items above was carried out for this purpose[^elbow]. @tbl-fa resumes a three-factor and two factor model[^labels_note]. Two factor model suggests grouping the four items that make up the specialized self-efficacy index into a factor 2. All items in this factor receive a score greater than 0.5.  In contrast, the specialised self-efficacy items are grouped between factor 1 and 3, but these, in turn, obtain a covariance of 0.8. In the two factors model, the covariance between factors decreases to 0.3, which is reasonable to assume that the latent variables are distinct. In turn, all items have factor scores greater than 0.5. Therefore, for the purposes of the research, we decided to continue working with the indices provided by IEA in this study.

[^elbow]: In @fig-elbow the reader can find information about correlation between all self-efficacy items and method to decide the number of factors.

```{r}
#| label: tbl-fa
#| tbl-cap: "Factorial Analysis ICT Self-efficacy"

cbind(
  # Create the data frame
  fa_3 <- data.frame(
    Task = c("A. Create a database", "B. Build a webpage", "C. Create a computer program/app", 
             "D. Set up a local area network", "E. Edit graphic images", "F. Write or edit text", 
             "G. Search and find information on internet", "H. Create multi-media presentation", 
             "I. Upload multimedia to an online profile", "J. Insert an image into a document/message", 
             "K. Install a program/app", "L. Judge internet information veracity"),
    A_1 = c(-0.20, 0.09, -0.00, 0.14, 0.15, 0.11, 0.24, 0.46, 0.82, 0.72, 0.67, 0.41),
    B_1 = c(0.49, 0.66, 0.91, 0.66, 0.23, -0.04, -0.09, 0.32, 0.02, 0.02, 0.00, 0.17),
    C_1 = c(0.47, 0.07, -0.07, -0.04, 0.44, 0.80, 0.66, 0.09, -0.02, 0.14, 0.11, 0.19)
  ),
  
  fa_2 <-  data.frame(
    A_2 = c(0.23, 0.13, -0.10, 0.08, 0.54, 0.83, 0.84, 0.52, 0.76, 0.83, 0.75, 0.57),
    B_2 = c(0.49, 0.67, 0.93, 0.66, 0.23, -0.03, -0.09, 0.30, -0.01, -0.01, -0.02, 0.16)
  )
)|>
  gt(rowname_col="Task")|>
  tab_row_group(
    label = "Suggested as General Self-efficacy",
    rows = 5:12
  )|>
  tab_row_group(
    label = "Suggested as Specialized Self-efficacy",
    rows = 1:4
  )|>
  tab_spanner(
    label = "Three factors model",
    columns = ends_with("1")
  )|>
  tab_spanner(
    label = "Two factors model",
    columns = ends_with("2")
  )|>
  cols_label(
    A_1 = "Factor 1",
    B_1 = "Factor 2",
    C_1 = "Factor 3",
    A_2 = "Factor 1",
    B_2 = "Factor 2"
  )|>
  tab_options(
    table.font.names = "Times New Roman"
  )|>
  
  tab_options(
    table.border.top.color = "white",
    heading.title.font.size = px(16),
    column_labels.border.top.width = 3,
    column_labels.border.top.color = "black",
    column_labels.border.bottom.width = 3,
    column_labels.border.bottom.color = "black",
    table_body.border.bottom.color = "black",
    table.border.bottom.color = "white",
    table.width = pct(100),
    table.background.color = "white"
  ) |>
  # center column text
  cols_align(align="center")|>
  tab_style(
    style = list(
      # remove horizontal lines
      cell_borders(
        sides = c("top", "bottom"),
        color = "white",
        weight = px(1)
      ),
      #center text
      cell_text(
        align="center",
      ),
      # remove row striping in Markdown documents
      cell_fill(color = "white", alpha = NULL)
    ),
    #do this for all columns and rows
    locations = cells_body(
      columns = everything(),
      rows = everything()
    ))|>
  tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      columns = 6,
      rows = 1:4
    )
  )|>
  tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      columns = 5,
      rows = 5:12
    )
  )|>
  tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      columns = 4,
      rows = 5:7
    )
  )|>
  tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      columns = 3,
      rows = 1:4
    )
  )|>
  tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      columns = 2,
      rows = 8:12
    )
)
```

Both indexes were constructed by the IEA using the Weighted Likelihood Estimation Method, where scores have a mean of 50 and a standard deviation of 10, based on equal weights for all countries. A higher index value indicates a higher level of self-efficacy.

**Computer and Information Literacy**: The CIL scale used in the analyses is based on a test applied by IEA. The test consists of a computer application with a set of five modules, in which each student has to respond to two randomly selected. Every module has 30 minutes of assessment. The structure of a module consisted of a set of questions and tasks based on a realistic theme and following a linear narrative structure. These modules have a series of small discrete tasks (typically taking less than a minute to complete) followed by a large task that typically took 15 to 20 minutes to complete. In total, the modules comprised 81 discrete questions that generated 102 score points. So, in total, an individual could reach a maximum score of 204 points.

The five modules measured different Computer Abilities. The first one was oriented in website construction, while the second one in digital files managing and collection. The thirst challenged students to plan a school trip through database building and mapping tools. Another module included a school-based social network where students were encouraged to post and message their peers to join a board games interest group. The last module requested research information about recycling on the internet, and then designed infographics about carbon footprint awareness.

The ICILS CIL reporting scale was established in ICILS 2013, with a mean of 500 (the average CIL scale score across countries in 2013) and a standard deviation of 100 for the equally weighted national samples that met IEA sample participation standards in the first cycle (2013). The ICILS database offers five possible values of the CIL score that were generated with full conditioning to derive summary student achievement statistics. Conventionally, papers based on this study usually occupy the first plausible value, which is coded "pv1cil". This research is no exception. Due to the large magnitude of the figures for this variable, the scale had to be multiplied by 0.1 to make the results more intelligible. The higher the value of the scale, the higher the CIL of the student. 

**Control variables**: The analysis includes control variables that tend to be influential in studies of educational and technological inequalities. These variables encompass family socioeconomic status - by the highest level of parental education (ISCED Scale) - and the number of books in the household.

@tbl-individual-descriptives displays key statistics of independent student-level vairables to explore.

```{r, results='asis', echo=FALSE}
#| label: tbl-individual-descriptives
#| tbl-cap: "Individual Variables Descriptives"

independent_student <- data|>
  select(
    s_sex,s_pv1cil,
    s_hisced,s_homlit
  )|>
  mutate(
    s_sex=to_label(s_sex),
    s_hisced=to_label(s_hisced),
    s_homlit=to_label(s_homlit)
  )

tbl_individual<-dfSummary(independent_student,
               plain.ascii = FALSE,
               style = "multiline",
               tmp.img.dir = "/tmp",
               graph.magnif = 0.75,
               headings = F,  # encabezado
               varnumbers = F, # num variable
               labels.col = T, # etiquetas
               na.col = F,    # missing
               graph.col = F, # plot
               valid.col = T, # n valido
               col.widths = c(30,10,10,10))

tbl_individual$Variable <- NULL # delete variable column

print(tbl_individual)
```

***School level***

The study took into account two contextual variables to develop multilevel analyses. The first is the average score on the Computer and Information Literacy test at school, which was estimated by aggregating students' scores by mean. The second is the gender composition of the school, which is estimated by dividing the total number of female students by the total number of eighth grade students in the school. According to the resulting ratio of female students, schools were classified into three categories. @tbl-school-descriptives details frequencies and descriptive statistics of these variables.

```{r, results='asis', echo=FALSE}
#| label: tbl-school-descriptives
#| tbl-cap: "School Variables Descriptives"

independent_school <- data|>
  mutate(c_gender_type=to_label(c_gender_type))|>
  distinct(idschool, .keep_all = TRUE)|>
  select(c_pv1cil,c_gender_type)

tbl_school<-dfSummary(independent_school,
               plain.ascii = FALSE,
               style = "multiline",
               tmp.img.dir = "/tmp",
               graph.magnif = 0.75,
               headings = F,  # encabezado
               varnumbers = F, # num variable
               labels.col = T, # etiquetas
               na.col = F,    # missing
               graph.col = F, # plot
               valid.col = T, # n valido
               col.widths = c(30,10,10,10))

tbl_school$Variable <- NULL # delete variable column

print(tbl_school)
```


## Method

The analysis consists of two stages. In the first exploratory stage, an exploration of differences in self-efficacy means by gender at both item and index level is carried out and correlations between constructs are displayed. In a second stage, due to the hierarchical structure of the data, as well as its representativeness at the student and school level, linear regression models are estimated from a multilevel perspective. This means that the models are oriented towards estimating both individual and contextual effects in a single analysis; capturing variation between groups and within groups [@vijverMultilevelAnalysisIndividuals2008; @hoxMultilevelAnalysisTechniques2017].

The hypotheses of this research were pre-registered in the Open Science Framework platform of the Center for Open Science (OSF), the access to the document is available at this [link](https://osf.io/5qjsd). The statistical analysis of this research was performed using the free software R version 4.3.0.